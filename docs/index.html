<html>
<!doctype html><html><meta charset="UTF-8">
<head>
<title>Panda Polls</title>
<meta name="description" content="Panda Polls: Prestige Pandas NFT Governance">
<meta name="keywords" content="Panda, Polls, Prestige Pandas, NFT, Governance">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="https://ftm.guru/icons/FMC.svg" />
</head>
<style>
*{
scroll-behavior: smooth !important;
}
@font-face{font-family:bold;src: url(https://ftm.guru/font/bold.ttf);}
@font-face{ font-family:italic;src: url(https://ftm.guru/font/italic.ttf);}
@font-face{ font-family:light;src: url(https://ftm.guru/font/light.ttf);}
@font-face{ font-family:light_italic;src: url(https://ftm.guru/font/light_italic.ttf);}
@font-face{ font-family:regular;src: url(https://ftm.guru/font/regular.ttf);}
@font-face{ font-family:regular_italic;src: url(https://ftm.guru/font/regular_italic.ttf);}
*{font-family:regular;}
</style>
<body>


<h1 align="center">Panda Polls</h1>

<div id="connect">
	Please connect your web3 wallet.
	<br><br>
	<button onclick="cw()" id="btn-connect">Connect</button>
</div>
	<br>
	<span id="cw_m"></span><br>
<div id="switch">
	A web3 wallet is now connected.
	<button onclick="cw()" id="btn-switch">Switch?</button>
	<br>
	<span id="cw"></span>
</div>

<h2>Create new poll?</h2>
Please follow the format stated below:<br>
<h3>Full content of Proposal</h3>
<textarea id="cp_desc" placeholder="Describe the Proposal in full detail!">
</textarea>
<br>
<h3>Options & Choices</h3>
Only 1 Choice per line, without line-breaks!<br>
<textarea id="cp_op" placeholder="One choice per line!">
</textarea>
<br>
<input id="cp_dl" type="date">
<br>
<button onclick="propose()">CREATE PROPOSAL</button>
<br><br>
<hr class="hhr">
<br><br>

<h2>Recent Propositions</h2>
<div id="recents"></div>


<br><br>
<hr class="hhr">
<br><br>
<h4 align="center"><a href="https://mtv.guru" target="_blank">Governance Modules powered by Guru Network</a></h4>
<script src="https://ftm.guru/ethers-5.2.umd.min.js">
</script>
<script>
window.addEventListener('load',function()
{
	provider = new ethers.providers.JsonRpcProvider("https://rpc.mtv.ac");
	signer = provider.getSigner();
	basics();
}, false);

async function basics()
{
	G = new ethers.Contract("0x5e6f527b3C68ec313369D0613Ef799ac680F83C6",inter,provider)
	ap = await G.getPropositions()
	for(i=ap.length-1;i>=0;i--)
	{
		p = document.createElement("div")
		p.innerHTML = `<a href="prop?pid=${i}">${ap[i]}</a>`;
		$("recents").append(p)
	}
}

async function peopose()
{
	G = new ethers.Contract("0x5e6f527b3C68ec313369D0613Ef799ac680F83C6",inter,provider)
	await G.create(($("cp_dl").value/1e3).toFixed(), $("cp_desc").value, $("cp_op").value.split("\n"))
}

inter =
[
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "voter",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "pid",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "option",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "bal",
				"type": "uint256"
			}
		],
		"name": "Vote",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "nft",
				"type": "address"
			}
		],
		"name": "changeNFT",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "dl",
				"type": "uint256"
			},
			{
				"internalType": "string",
				"name": "desc",
				"type": "string"
			},
			{
				"internalType": "string[]",
				"name": "opts",
				"type": "string[]"
			}
		],
		"name": "create",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "th",
				"type": "uint256"
			}
		],
		"name": "setThreshold",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "own",
				"type": "address"
			}
		],
		"name": "transferOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "opt",
				"type": "uint256"
			}
		],
		"name": "vote",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "pid",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "opt",
				"type": "uint256"
			}
		],
		"name": "vote",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "nft",
				"type": "address"
			}
		],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "pid",
				"type": "uint256"
			}
		],
		"name": "calcVotes",
		"outputs": [
			{
				"internalType": "uint256[]",
				"name": "v",
				"type": "uint256[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "pid",
				"type": "uint256"
			}
		],
		"name": "getOptions",
		"outputs": [
			{
				"internalType": "string[]",
				"name": "",
				"type": "string[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "pid",
				"type": "uint256"
			}
		],
		"name": "getProposal",
		"outputs": [
			{
				"components": [
					{
						"internalType": "address",
						"name": "creator",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "deadline",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "description",
						"type": "string"
					},
					{
						"internalType": "string[]",
						"name": "options",
						"type": "string[]"
					},
					{
						"internalType": "address[]",
						"name": "voters",
						"type": "address[]"
					},
					{
						"internalType": "uint256[]",
						"name": "votes",
						"type": "uint256[]"
					},
					{
						"internalType": "bool",
						"name": "ended",
						"type": "bool"
					}
				],
				"internalType": "struct Gov.Proposal",
				"name": "",
				"type": "tuple"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getPropositions",
		"outputs": [
			{
				"internalType": "string[]",
				"name": "ap",
				"type": "string[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "pid",
				"type": "uint256"
			}
		],
		"name": "getVoters",
		"outputs": [
			{
				"internalType": "address[]",
				"name": "",
				"type": "address[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "pid",
				"type": "uint256"
			}
		],
		"name": "getVotes",
		"outputs": [
			{
				"internalType": "uint256[]",
				"name": "",
				"type": "uint256[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "NFT",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "proposals",
		"outputs": [
			{
				"internalType": "address",
				"name": "creator",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "deadline",
				"type": "uint256"
			},
			{
				"internalType": "string",
				"name": "description",
				"type": "string"
			},
			{
				"internalType": "bool",
				"name": "ended",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "threshold",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
]
</script>
</body>
</html>